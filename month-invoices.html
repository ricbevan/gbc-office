<!DOCTYPE html>
<html>
  <head>
      <title>Month Invoice</title>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <style>
        .centre {
          position: absolute;
          left: 50%;
          top: 50%;
          -webkit-transform: translate(-50%, -50%);
          transform: translate(-50%, -50%);
        }
      </style>
  </head>
  <body>
    <div class="centre">
      Uno momento...
    </div>
    <script>
      var thisMonth;
      var date = new Date();

      if(window.location.hash)
        date.setMonth(date.getMonth() - 1);

      var firstDay = new Date(date.getFullYear(), date.getMonth(), 1);
      var lastDay = new Date(date.getFullYear(), date.getMonth() + 1, 0);

      window.location.replace('https://go.xero.com/AccountsReceivable/Search.aspx?invoiceStatus=INVOICESTATUS%2fAUTHORISED&graphSearch=False&startDate=' +
        formatDate(firstDay) +
        '&endDate=' +
        formatDate(lastDay) +
        '&dateWithin=invoice&pageSize=25&orderBy=PaidToName&direction=ASC&unsentOnly=False');

      function formatDate(date) {
        var d = new Date(date),
          month = '' + (d.getMonth() + 1),
          day = '' + d.getDate(),
          year = d.getFullYear();

        if (month.length < 2)
          month = '0' + month;

        if (day.length < 2)
          day = '0' + day;

        return [year, month, day].join('-');
      }
    </script>
  </body>
</html>
